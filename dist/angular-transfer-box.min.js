angular.module("angular-transfer-box",["transfer/transfer.html","transfer/transfer-list.html","transfer/transfer-operation.html"]),angular.module("angular-transfer-box").directive("transferList",function(){return{restrict:"E",replace:!0,scope:{items:"=",showSearch:"=",title:"@",searchPlaceholder:"@",notFoundContent:"@",render:"&"},templateUrl:"transfer/transfer-list.html",link:function(e,n){function t(){e.showNotFound=!e.items.some(function(e){return a(e)})}function r(){e.items.forEach(function(e){e.show=a(e)})}function a(n){var t=e.searchContent;return!t||e.innerRender(n).indexOf(t)!==-1}if(!angular.isArray(e.items))throw Error("Transfer List need a data list.");e.render=e.render(),e.innerRender=function(n){return angular.isFunction(e.render)?e.render(n.item):n.item},e.selectAll=function(n){n=n||!1,e.items.forEach(function(e){e.selected=n})},e.toggleItem=function(e){e.selected=!e.selected},e.headerCheck=function(){var n=e.getCheckedNumber()<e.items.length;e.selectAll(n)},e.getHeaderState=function(){var n=e.getCheckedNumber();return 0===n?"unchecked":n==e.items.length?"checked":"indeterminate"},e.getCheckedNumber=function(){return e.items.reduce(function(e,n){return n.selected?e+1:e},0)},e.$watch("items",t,!0),e.showSearch&&(e.clearSearch=function(){e.searchContent="",angular.element(n).find(".transfer-list-search").val(e.searchContent),r()},e.searchKeyUp=function(n){e.searchContent=angular.element(n.target).val(),r()})}}}),angular.module("angular-transfer-box").directive("transferOperation",function(){return{restrict:"E",replace:!0,scope:{change:"&",disabled:"="},templateUrl:"transfer/transfer-operation.html"}}),angular.module("angular-transfer-box").directive("transfer",function(e){return{restrict:"E",replace:!0,scope:{originSource:"=",targetKeys:"=",option:"="},templateUrl:"transfer/transfer.html",link:function(n){function t(e){return e.map(function(e){return{selected:!1,item:e,show:!0}})}function r(e){return e.map(function(e){return e.item})}function a(n,t){for(var r=[],a=n.length-1;a>=0;a--){var o=n[a];o.selected&&(r.push(o),n.splice(a,1))}r.forEach(function(e){e.selected=!1,e.highlight=!0,t.unshift(e)}),s(),e(function(){r.forEach(function(e){e.highlight=!1})},150)}function s(){for(;n.targetKeys.length>0;)n.targetKeys.shift();r(n.targetSource).forEach(function(e){n.targetKeys.push(e.key)})}function o(e){function n(e){if(null===e||void 0===e)throw new TypeError("Cannot convert undefined or null to object");return Object(e)}function t(e,n,t){var s=n[t];if(void 0!==s&&null!==s){if(a.call(e,t)&&(void 0===e[t]||null===e[t]))throw new TypeError("Cannot convert undefined or null to object ("+t+")");a.call(e,t)&&angular.isObject(s)?e[t]=r(Object(e[t]),n[t]):e[t]=s}}function r(e,n){if(e===n)return e;n=Object(n);for(var r in n)a.call(n,r)&&t(e,n,r);return e}var a=Object.prototype.hasOwnProperty;e=n(e);for(var s=1;s<arguments.length;s++)r(e,arguments[s]);return e}var i={orientation:"horizontal",render:function(e){return e.key},titles:{origin:"Source List",target:"Target List"},showSearch:!0,searchPlaceholder:"Please enter your content",notFoundContent:"Not Found",classes:""};n.option=o({},i,n.option),n.targetSource=[],n.source=[],n.disabled={left:!1,right:!1},n.onChange=function(e){var t=null,r=null;switch(console.info(e),e.toLowerCase()){case"source":t=n.source,r=n.targetSource;break;case"target":t=n.targetSource,r=n.source}t&&r&&a(t,r)},n.$watch("originSource",function(){n.targetSource=t(n.originSource.filter(function(e){return n.targetKeys&&n.targetKeys.indexOf(e.key)!==-1})),n.source=t(n.originSource.filter(function(e){return r(n.targetSource).indexOf(e)===-1}))}),n.$watch("targetSource",function(){n.disabled.target=n.targetSource.every(function(e){return!e.selected})},!0),n.$watch("source",function(){n.disabled.source=n.source.every(function(e){return!e.selected})},!0)}}}),angular.module("transfer/transfer-list.html",[]).run(["$templateCache",function(e){e.put("transfer/transfer-list.html",'<div class="transfer-list">\n   <div class="transfer-list-header">\n       <span class="transfer-checkbox" ng-click="headerCheck();" ng-class="{checked :\'transfer-checkbox-checked\',indeterminate : \'transfer-checkbox-indeterminate\'}[getHeaderState()]">\n           <span class="transfer-checkbox-inner"></span>\n       </span>\n       <span class="transfer-list-header-selected">\n           <span>\n               <span ng-hide="getCheckedNumber() == 0">\n                   <span ng-bind="getCheckedNumber()"></span>\n                   <span>/</span>\n               </span>\n               <span ng-bind="items.length"></span>\n               <span>items</span>\n           </span>\n           <span class="transfer-list-header-title" ng-bind="title"></span>\n       </span>\n   </div>\n   <div class="transfer-list-body" ng-class="{\'transfer-list-body-with-search\':showSearch}">\n       <div class="transfer-list-search-wrapper" ng-if="showSearch">\n           <div>\n               <input class="transfer-list-search" placeholder="{{::searchPlaceholder}}" ng-init="searchContent" ng-keyup="searchKeyUp($event)"/>\n               <span class="transfer-list-search-action">\n                   <i class="fa fa-search" ng-if="!searchContent"></i>\n                   <i class="fa fa-close" ng-if="searchContent" ng-click="clearSearch();" style="cursor: pointer"></i>\n               </span>\n           </div>\n       </div>\n       <ul class="transfer-list-content">\n           <li ng-repeat="listItem in items track by listItem.item.key" ng-click="toggleItem(listItem);" class="transfer-list-content-item" ng-class="{\'highlight\':listItem.highlight}" ng-hide="showSearch && !listItem.show">\n               <span class="transfer-checkbox" ng-class="{\'transfer-checkbox-checked\': listItem.selected}">\n                   <span class="transfer-checkbox-inner"></span>\n               </span>\n               <span ng-bind="innerRender(listItem)"></span>\n           </li>\n           <div class="transfer-list-not-found" ng-bind="notFoundContent" ng-if="showNotFound"></div>\n       </ul>\n   </div>\n</div>\n')}]),angular.module("transfer/transfer-operation.html",[]).run(["$templateCache",function(e){e.put("transfer/transfer-operation.html",'<div class="transfer-operation">\n   <button type="button" ng-disabled="disabled.target" ng-click="change({direction:\'target\'})">&lt;</button>\n   <button type="button" ng-disabled="disabled.source" ng-click="change({direction:\'source\'})">&gt;</button>\n</div>')}]),angular.module("transfer/transfer.html",[]).run(["$templateCache",function(e){e.put("transfer/transfer.html",'<div class="transfer {{::option.classes}} {{::option.orientation}}">\n   <transfer-list items="source" render="option.render" title="{{::option.titles.origin}}" show-search="option.showSearch" search-placeholder="{{::option.searchPlaceholder}}" not-found-content="{{::option.notFoundContent}}">\n   </transfer-list>\n   <transfer-operation change="onChange(direction)" disabled="disabled">\n   </transfer-operation>\n   <transfer-list items="targetSource" render="option.render" title="{{::option.titles.target}}" show-search="option.showSearch" search-placeholder="{{::option.searchPlaceholder}}" not-found-content="{{::option.notFoundContent}}">\n   </transfer-list>\n</div>\n')}]);